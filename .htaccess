# WAAWH Application - Hostinger deployment configuration
# Ensure proper redirects and security

# Enable rewrite engine
RewriteEngine On

# Redirect to index.php if accessing the root directory
DirectoryIndex index.php

# Protect sensitive directories and files
<FilesMatch "\.(sqlite|db|sql|log)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Protect config files
<Files "config.php">
    Order Allow,Deny
    Deny from all
</Files>

# Protect data directory
<Directory "data">
    Order Allow,Deny
    Deny from all
</Directory>

# Allow uploads directory but protect direct script execution
<Directory "uploads">
    # Disable script execution in uploads
    <FilesMatch "\.(php|phtml|pl|py|jsp|asp|sh|cgi)$">
        Order Allow,Deny
        Deny from all
    </FilesMatch>
</Directory>

# Enable error reporting for debugging (remove in production)
php_flag display_errors on
php_flag display_startup_errors on
php_value error_reporting "E_ALL"

# Set proper file upload limits
php_value upload_max_filesize 50M
php_value post_max_size 50M
php_value max_execution_time 300
php_value max_input_time 300

# Ensure UTF-8 encoding
AddDefaultCharset UTF-8

# Enable gzip compression for better performance
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>